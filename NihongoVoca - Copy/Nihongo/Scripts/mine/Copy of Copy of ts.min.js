function updateFastTestVoca(){$.ajax({cache:!0,type:"post",async:!0,url:"/Library/"+$("#uft").val(),data:JSON.stringify(vocas[currentIndex]),dataType:"json",contentType:"application/json",success:function(n){n.ReturnCode!=0},error:function(n){return console.log(n.responseText),!1}})}function updateTestResult(){for(var n=0;n<vocas.length;n++)vocas[n].CompletedTime=completedTime;vocas.length>0&&$.ajax({cache:!0,type:"post",async:!0,url:"/Library/"+$("#utr").val(),data:JSON.stringify(vocas),dataType:"json",contentType:"application/json",success:function(n){n.ReturnCode!=0&&alert("Có lỗi khi update db")},error:function(n){return console.log(n.responseText),!1}})}function getTestVocas(){vocas=[];$.ajax({cache:!0,type:"get",async:!0,url:"/Library/"+$("#gtv").val(),data:{id:$("#vcd").val()},dataType:"json",success:function(n){n.returnCode==$("#accessDenied").val()?window.location.href="/Account/RequireLogin":($.each(n.vocabularies,function(n,t){if(vocas.push(t),t.TestSkill=="1"){var i=new Audio(t.UrlAudio);i.load()}}),completedTime=0,currentIndex=0,showFlashCard(currentIndex,!1))},error:function(n){return console.log(n.responseText),!1},beforeSend:function(){$("#loadingModal").modal()},complete:function(){$("#loadingModal").modal("hide")}})}function getLink(n){return n}function checkInput(){var n,t,i,u;if(completedTime+=timePerVoca-parseInt($("#timer").html()),currentIndex<vocas.length){if(vocas[currentIndex].TestType=="2"){if(n=$("#inputAlphabet").val().toLowerCase().replace(/\s+/g,""),vocas[currentIndex].SelectedValue=n,t="1",vocas[currentIndex].DisplayType=="3"){var f=vocas[index].OnRomaji.toLowerCase().replace(/\s+/g,""),e=vocas[index].OnReading.toLowerCase().replace(/\s+/g,""),o=vocas[index].OnRomaji2.toLowerCase().replace(/\s+/g,""),s=vocas[index].OnReading2.toLowerCase().replace(/\s+/g,""),h=vocas[index].KunRomaji.toLowerCase().replace(/\s+/g,""),c=vocas[index].KunReading.toLowerCase().replace(/\s+/g,""),l=vocas[index].KunRomaji2.toLowerCase().replace(/\s+/g,""),a=vocas[index].KunReading2.toLowerCase().replace(/\s+/g,""),r=vocas[index].Kanji.toLowerCase().replace(/\s+/g,"");n!=f&&n!=e&&n!=o&&n!=s&&n!=h&&n!=c&&n!=l&&n!=a&&n!=r&&(t="0")}else{var v=vocas[currentIndex].Romaji.toLowerCase().replace(/\s+/g,""),y=vocas[currentIndex].Hiragana.toLowerCase().replace(/\s+/g,""),p=vocas[currentIndex].Katakana.toLowerCase().replace(/\s+/g,""),r=vocas[currentIndex].Kanji.toLowerCase().replace(/\s+/g,"");n!=v&&n!=y&&n!=p&&n!=r&&(t="0")}vocas[currentIndex].IsCorrect=t;t=="0"?(speak("/Content/media/fail.wav"),inCorrectVocas.push(vocas[currentIndex]),$("#result").html()):(speak("/Content/media/tada.wav"),correctVocas.push(vocas[currentIndex]))}else vocas[currentIndex].TestType=="1"&&(i=$("#selectedValue").val().toLowerCase().replace(/\s+/g,""),u=$("#correctValue").val().toLowerCase().replace(/\s+/g,""),vocas[currentIndex].SelectedValue=i,vocas[currentIndex].IsCorrect="1",i!=u?(speak("/Content/media/fail.wav"),vocas[currentIndex].IsCorrect="0",inCorrectVocas.push(vocas[currentIndex])):(speak("/Content/media/tada.wav"),correctVocas.push(vocas[currentIndex])));updateFastTestVoca()}clearInterval(timer);currentIndex<vocas.length-1?timer=setInterval(function(){currentIndex++;showFlashCard(currentIndex,!1)},interval):(currentIndex=-1,showFlashCard(-1,!1),isPass=correctVocas.length>=vocas.length*8/10?!0:!1,updateTestResult());$("#inputAlphabet").attr("disabled","disabled");document.getElementById("test-content").style.cursor="not-allowed";$("#item-active").html("")}function showFlashCard(n){var r,f,i,t;if($("#inputAlphabet").removeAttr("disabled"),document.getElementById("test-content").style.cursor="auto",clearInterval(timer),r=parseInt($("#rtp").val()),f=parseFloat($("#vsf").val()),n==-1){var e=$("#ale").val(),o=$("#av").val(),u=parseInt(vocas.length*8/10),t="";t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">';t+='   <div class="carousel-inner" role="listbox">';t+='       <div class="item active">';t+='           <div class="row text-center">';t+='               <div class="col-lg-12">';t+='                   <p class="text-info">Số câu đúng: '+correctVocas.length+"/"+vocas.length+"<\/p>";t+='                   <p class="text-info">Thời gian hoàn thành: '+completedTime+" giây<\/p>";t+='                   <p class="text-info">Kết quả: '+(correctVocas.length>=u?"Chúc mừng bạn đã vượt qua được bài kiểm tra":"Bạn đã không vượt qua được bài kiểm tra. Hãy ôn lại")+"<\/p>";console.log("voca:"+vocas.length);console.log("correct:"+correctVocas.length);console.log("completedTime:"+completedTime);console.log("requiredTime:"+r*vocas.length/2);t+=f>0?correctVocas.length==vocas.length&&completedTime<=r*vocas.length/2?'                   <p class="text-info">Với việc hoàn thành <strong>TUYỆT VỜI<\/strong> bài kiểm tra, bạn nhận được <strong>10 ĐIỂM TÍCH LŨY<strong><\/p>':correctVocas.length==vocas.length?'                   <p class="text-info">Với việc hoàn thành <strong>XUẤT SẮC<\/strong> bài kiểm tra, bạn nhận được <strong>5 ĐIỂM TÍCH LŨY<strong><\/p>':correctVocas.length>=u?'                   <p class="text-info">Với việc hoàn thành <strong>TỐT<\/strong> bài kiểm tra, bạn nhận được <strong>2 ĐIỂM TÍCH LŨY<strong><\/p>':'                   <p class="text-info">Với việc hoàn thành bài kiểm tra, bạn nhận được <strong>1 ĐIỂM TÍCH LŨY<strong><\/p>':'                   <p class="text-info">Với việc hoàn thành bài kiểm tra, bạn nhận được <strong>1 ĐIỂM TÍCH LŨY<strong><\/p>';t+="               <\/div>";t+="           <\/div>";t+='           <div class="row text-center">';t+='               <div class="col-lg-12">';correctVocas.length<u?(t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult(0); return false;">Xem kết quả<\/a>',t+='                   <a href="'+e+'" role="button" class="btn btn-navigator btn-lg" >Ôn lại<\/a>'):(t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult(0); return false;">Xem kết quả<\/a>',t+='                   <a href="'+o+'" class="btn btn-navigator btn-lg" role="button" >Trở về<\/a>');t+="               <\/div>";t+="           <\/div>";t+="       <\/div>";t+="   <\/div>";t+="<\/div>";$("#flashCard").html(t);$("#btnNext").hide()}else i=searchVoca(n),i!=null&&(t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row">',t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Thời gian: <strong><span id="timer">'+r+"<\/span><\/strong><\/p>",t+="               <\/div>",t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu: <strong><span id="currentVoca">'+(currentIndex+1)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu đúng: <strong><span id="correctVoca">'+correctVocas.length+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu sai: <strong><span id="correctVoca">'+(currentIndex-correctVocas.length)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+="           <\/div>",t+='           <div class="row" id="item-active">',t+='               <div class="col-lg-4 col-md-4 col-xs-6  text-center">',i.TestSkill=="3"?t+='                   <img class="img-rounded" src="'+getLink(i.UrlImage)+'" alt="Từ vựng tiếng Nhật" height="300px" width="100%"/>':i.TestSkill=="5"?t+="                   <h3>"+i.VMeaning+"<\/h3>":i.TestSkill=="1"&&(t+='                   <button type="button" class="btn btn-default btn-lg" onclick="speak(\''+i.UrlAudio+'\');"><span class="glyphicon glyphicon-volume-up" aria-hidden="true">Nghe<\/span><\/button>'),t+="               <\/div>",t+='               <div class="col-lg-8 col-md-8 col-xs-6">',i.TestType=="1"?(t+="<label>Chọn từ đúng<\/label>",t+='<input type="hidden" id="correctValue" value="'+i.CorrectResult+'"/>',t+='<input type="hidden" id="correctUrlAudio" value="'+i.CorrectUrlAudio+'"/>',t+='<input type="hidden" id="selectedValue" />',t+='<div class="list-group">',t+='   <a href="#" id="result1" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 1);return false;">'+i.Result1+'<\/a><input type="hidden" id="urlAudio1" />',t+='   <a href="#" id="result2" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 2);return false;">'+i.Result2+'<\/a><input type="hidden" id="urlAudio2" />',t+='   <a href="#" id="result3" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 3);return false;">'+i.Result3+'<\/a><input type="hidden" id="urlAudio3" />',t+='   <a href="#" id="result4" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 4);return false;">'+i.Result4+'<\/a><input type="hidden" id="urlAudio4" />',t+="<\/div>"):i.TestType=="2"&&(t+="<label>Gõ từ đúng<\/label>",t+='<input type="text" class="form-control" id="inputAlphabet" maxlength="30">'),t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),i.TestType=="2"?($("#inputAlphabet").val(""),$("#inputAlphabet").focus(),$("#btnNext").show()):i.TestType=="1"&&$("#btnNext").hide(),i.TestSkill=="1"&&speak(i.UrlAudio)),$("#timer").setTimer(function(n,t){$(this).html(t)},1e3,timePerVoca,!0,function(){$("#timer").html()=="0"&&checkInput()})}function showResult(n){var r=$("#ale").val(),i=searchVoca(n),t;if(i!=null)if(t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row">',t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu: <strong><span id="currentVoca">'+(n+1)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+="           <\/div>",t+='           <div class="row">',t+='               <div class="col-lg-4 col-md-4 col-xs-6">',t+='                   <img class="img-rounded" src="'+getLink(i.UrlImage)+'" alt="Từ vựng tiếng Nhật" height="300px" width="100%"/>',t+="               <\/div>",t+='               <div class="col-lg-8 col-md-8 col-xs-6">',i.TestType=="1"?(t+="<label>Chọn từ đúng<\/label>",t+='<div class="list-group">',t+='   <a href="#" id="result1" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result1+'<\/a><span id="span1"><\/span>',t+='   <a href="#" id="result2" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result2+'<\/a><span id="span2"><\/span>',t+='   <a href="#" id="result3" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result3+'<\/a><span id="span3"><\/span>',t+='   <a href="#" id="result4" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result4+'<\/a><span id="span4"><\/span>',t+="<\/div>"):i.TestType=="2"&&(t+='<div class="alert alert-primary" role="alert"><span class="glyphicon glyphicon-ok" aria-hidden="true"><\/span><span class="sr-only">Error:<\/span> Từ vựng: '+i.Hiragana+"&nbsp;&nbsp;"+i.Katakana+"&nbsp;&nbsp;"+i.Kanji+"&nbsp;&nbsp;"+i.Romaji+"<\/div>",t+='<div id="divInputResult" class="" role="alert"><span id="spanInputResult" class="" aria-hidden="true"><\/span><span class="sr-only">Error:<\/span> Từ của bạn: '+i.SelectedValue+"<\/div>"),t+="               <\/div>",t+="           <\/div>",t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult('+(n-1)+'); return false;">Trước<\/a>',t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult('+(n+1)+'); return false;">Tiếp<\/a>',t+='                   <a href="'+r+'" role="button" class="btn btn-navigator btn-lg" >Quay về<\/a>',t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),i.TestType=="1"){switch(i.CorrectResult){case 1:$("#result1").addClass("list-group-item active");$("#span1").addClass("glyphicon glyphicon-ok ok");break;case 2:$("#result2").addClass("list-group-item active");$("#span2").addClass("glyphicon glyphicon-ok ok");break;case 3:$("#result3").addClass("list-group-item active");$("#span3").addClass("glyphicon glyphicon-ok ok");break;case 4:$("#result4").addClass("list-group-item active");$("#span4").addClass("glyphicon glyphicon-ok ok")}if(i.IsCorrect=="0")switch(i.SelectedValue){case"1":$("#result1").addClass("list-group-item-danger");$("#span1").addClass("glyphicon glyphicon-remove error");break;case"2":$("#result2").addClass("list-group-item-danger");$("#span2").addClass("glyphicon glyphicon-remove error");break;case"3":$("#result3").addClass("list-group-item-danger");$("#span3").addClass("glyphicon glyphicon-remove error");break;case"4":$("#result4").addClass("list-group-item-danger");$("#span4").addClass("glyphicon glyphicon-remove error")}}else i.TestType=="2"&&(i.IsCorrect=="0"?($("#divInputResult").addClass("alert alert-danger"),$("#spanInputResult").addClass("glyphicon glyphicon-remove")):($("#divInputResult").addClass("alert alert-primary"),$("#spanInputResult").addClass("glyphicon glyphicon-ok")))}function selectValue(n,t){$("#selectedValue").val(t);$("#btnNext").trigger("click")}function clearChoosing(){$("a[name=resultChoosing]").each(function(){$(this).prop("class","list-group-item")})}function searchVoca(n){for(var t=0;t<vocas.length;t++)if(t==n)return vocas[t]}var timePerVoca=15,completedTime=0,inCorrectVocas=[],correctVocas=[],vocas=[],isPass=!1,currentIndex=0,timer,interval;$(document).ready(function(){var n,t;window.onbeforeunload=function(){if(vocas.length>0&&currentIndex>=0)return"Kết quả bài kiểm tra sẽ không được ghi nhận nếu bạn thoát khỏi trang"};n=new Audio("/Content/media/fail.wav");n.load();t=new Audio("/Content/media/tada.wav");t.load();$("#test-content").hide();$("#test-note").show();currentIndex=0;$("#aTest").on("click",function(){$("#test-content").show();$("#test-note").hide();getTestVocas()});$("#btnNext").on("click",function(){var n,t;if(vocas[currentIndex].TestType=="2"){if(n=$("#inputAlphabet").val().toLowerCase().replace(/\s+/g,""),n=="")return alert("Vui lòng nhập giá trị!"),$("#inputAlphabet").val(""),$("#inputAlphabet").focus(),!1}else if(vocas[currentIndex].TestType=="1"&&(t=$("#selectedValue").val().toLowerCase().replace(/\s+/g,""),t==""))return alert("Vui lòng chọn 1 giá trị!"),!1;checkInput()});$(document).keydown(function(n){var t=n.keyCode?n.keyCode:n.which;if(t==13)return currentIndex>=0&&currentIndex<vocas.length&&$("#btnNext").trigger("click"),!1})});interval=1500;
/*
//# sourceMappingURL=ts.min.js.map
*/