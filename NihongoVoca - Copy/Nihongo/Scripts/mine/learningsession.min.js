function updateTestResult(){for(var n=0;n<vocas.length;n++)vocas[n].CompletedTime=completedTime;vocas.length>0&&$.ajax({cache:!0,type:"post",async:!0,url:"/Library/"+$("#utr").val(),data:JSON.stringify(vocas),dataType:"json",contentType:"application/json",success:function(n){n.ReturnCode!=0&&alert("Có lỗi xảy ra!")},error:function(n){return console.log(n.responseText),!1}})}function getTestVocas(){$(".result").hide();$(".lesson").show();vocas=[];totalLevel=0;currentLevel=0;isPractice=!0;currentIndex=0;showProgress();$.ajax({cache:!0,type:"get",async:!0,url:"/Library/"+$("#gtv").val(),data:{id:$("#vsd").val(),isKanji:$("#ik").val()},dataType:"json",success:function(n){n.returnCode==$("#accessDenied").val()?window.location.href="/Account/RequireLogin":($.each(n.vocabularies,function(n,t){vocas.push(t);var i=new Audio(t.UrlAudio);i.load();totalLevel+=parseInt(10-t.Level)}),completedTime=0,currentIndex=0,quizzVoca=createQuizz(currentIndex),isPractice=quizzVoca.IsDone=="1"?!0:quizzVoca.Level=="0"?!1:quizzVoca.Level<10?!0:!1,showFlashCard(quizzVoca,!1))},error:function(n){return console.log(n.responseText),!1}})}function getPracticeVocas(){$(".result").hide();$(".lesson").show();vocas=[];totalLevel=0;currentLevel=0;isPractice=!0;currentIndex=0;showProgress();$.ajax({cache:!0,type:"get",async:!0,url:"/Library/"+$("#gpr").val(),data:{id:$("#vsd").val(),isKanji:$("#ik").val()},dataType:"json",success:function(n){n.returnCode==$("#accessDenied").val()?window.location.href="/Account/RequireLogin":($.each(n.vocabularies,function(n,t){vocas.push(t);var i=new Audio(t.UrlAudio);i.load();totalLevel+=parseInt(10-t.Level)}),completedTime=0,currentIndex=0,quizzVoca=createQuizz(currentIndex),isPractice=quizzVoca.IsDone=="1"?!0:quizzVoca.Level=="0"?!1:quizzVoca.Level<10?!0:!1,showFlashCard(quizzVoca,!1))},error:function(n){return console.log(n.responseText),!1}})}function getLink(n){return n}function selectChoosingResult(n){switch(n){case 1:$("#selectedValue").val(1);break;case 2:$("#selectedValue").val(2);break;case 3:$("#selectedValue").val(3);break;case 4:$("#selectedValue").val(4)}checkInput()}function checkInput(){var t,i,n;if(isPractice)if(quizzVoca!=null){if(quizzVoca.TestType=="1"){if(t=$("#selectedValue").val().toLowerCase().replace(/\s+/g,""),t=="")return alert("Vui lòng chọn 1 giá trị!"),!1;if(i=$("#correctValue").val().toLowerCase().replace(/\s+/g,""),quizzVoca.SelectedValue=t,quizzVoca.IsCorrect="1",t!=i?(speak("/Content/media/fail.wav"),quizzVoca.IsCorrect="0",quizzVoca.NumOfWrong+=1,n=parseInt(quizzVoca.Level)-1,n<0&&(n=0),quizzVoca.Level=n,currentLevel-=1,n<0&&(currentLevel+=1)):(speak("/Content/media/tada.wav"),quizzVoca.IsCorrect="1",quizzVoca.Point+=1,n=parseInt(quizzVoca.Level)+2,n>10&&(n=10),quizzVoca.Level=n,currentLevel+=2,n>10&&(currentLevel-=1)),quizzVoca.IsCorrect=="0"){switch(quizzVoca.CorrectResult){case 1:$("#result1").html('1 <span class="glyphicon glyphicon-ok ok"><\/span><br>'+quizzVoca.Result1);break;case 2:$("#result2").html('2 <span class="glyphicon glyphicon-ok ok"><\/span><br>'+quizzVoca.Result2);break;case 3:$("#result3").html('3 <span class="glyphicon glyphicon-ok ok"><\/span><br>'+quizzVoca.Result3);break;case 4:$("#result4").html('4 <span class="glyphicon glyphicon-ok ok"><\/span><br>'+quizzVoca.Result4)}switch(t){case"1":$("#result1").html('1 <span class="glyphicon glyphicon-remove error"><\/span><br>'+quizzVoca.Result1);break;case"2":$("#result2").html('2 <span class="glyphicon glyphicon-remove error"><\/span><br>'+quizzVoca.Result2);break;case"3":$("#result3").html('3 <span class="glyphicon glyphicon-remove error"><\/span><br>'+quizzVoca.Result3);break;case"4":$("#result4").html('4 <span class="glyphicon glyphicon-remove error"><\/span><br>'+quizzVoca.Result4)}$("a[name='resultChoosing']").attr("disabled",!0);isPractice=!1}else if(isFinish())currentIndex=-1,currentLevel=totalLevel,showResultPage(),showProgress(),isPass=correctVocas.length>=vocas.length*8/10?!0:!1,updateTestResult();else{if(isAllLearnt())for(currentIndex=Math.floor(Math.random()*vocas.length+1)-1;vocas[currentIndex].Level==maxLevel;)currentIndex=Math.floor(Math.random()*vocas.length+1)-1;else for(currentIndex++,currentIndex==vocas.length&&(currentIndex=0);currentIndex<vocas.length&&vocas[currentIndex].Level==maxLevel;)currentIndex++;currentIndex<vocas.length?(quizzVoca=createQuizz(currentIndex),isPractice=quizzVoca.HasLearnt=="1"?!0:quizzVoca.Level=="0"?!1:quizzVoca.Level<10?!0:!1,showFlashCard(quizzVoca,!1),isPractice&&showProgress()):alert("a")}}}else currentIndex=-1,showFlashCard(-1,!1);else quizzVoca.HasLearnt="1",quizzVoca.IsDone="1",isPractice=!0,showFlashCard(currentIndex,!1)}function isAllLearnt(){for(var t=!0,n=0;n<vocas.length;n++)if(vocas[n].IsDone=="0"){t=!1;break}return t}function isFinish(){for(var t=!0,n=0;n<vocas.length;n++)if(vocas[n].IsDone=="0"||vocas[n].Level<maxLevel){t=!1;break}return t}function sleep(n){for(var i=(new Date).getTime(),t=0;t<1e7;t++)if((new Date).getTime()-i>n)break}function showProgress(){var n='<div class="progress-bar progress-bar-primary progress-bar-striped active" role="progressbar" aria-valuenow="'+currentLevel+'" aria-valuemin="0" " aria-valuemax="'+totalLevel+'" style="width: '+(totalLevel==0?0:currentLevel/totalLevel*100)+'%;"><\/div>';$("#progress").html(n)}function showResultPage(){var i=$("#ale").val(),r=$("#av").val(),u=parseInt(vocas.length*8/10),t,n;for($("#tblLearntWord").html(""),t=0;t<vocas.length;t++)n="",n+="<tr>",n+='<td class="hidden-xs"><strong>'+(t+1)+"<\/strong><\/td>",n+="<td>"+(vocas[t].DisplayType=="1"?vocas[t].Hiragana:vocas[t].Katakana)+"<\/td>",n+='<td class="hidden-xs">'+(vocas[t].DisplayType=="1"?vocas[t].Romaji:vocas[t].Romaji_Katakana)+"<\/td>",n+="<td>"+vocas[t].Kanji+"<\/td>",n+="<td>"+vocas[t].VMeaning+"<\/td>",n+="<td>",n+='<button class=" btn btn-circle btn-mn btn-'+(vocas[t].Level>1?"primary":"default")+'" style="width:15px;height:15px;">',n+='<span class="fa fa-heart"><\/span>',n+="<\/button>",n+='<button class=" btn btn-circle btn-mn btn-'+(vocas[t].Level>3?"primary":"default")+'" style="width:15px;height:15px;">',n+='<span class="fa fa-heart"><\/span>',n+="<\/button>",n+='<button class=" btn btn-circle btn-mn btn-'+(vocas[t].Level>5?"primary":"default")+'" style="width:15px;height:15px;">',n+='<span class="fa fa-heart"><\/span>',n+="<\/button>",n+='<button class=" btn btn-circle btn-mn btn-'+(vocas[t].Level>7?"primary":"default")+'" style="width:15px;height:15px;">',n+='<span class="fa fa-heart"><\/span>',n+="<\/button>",n+='<button class=" btn btn-circle btn-mn btn-'+(vocas[t].Level>9?"primary":"default")+'" style="width:15px;height:15px;">',n+='<span class="fa fa-heart"><\/span>',n+="<\/button>",n+="<\/td>",n+="<\/tr>",$("#tblLearntWord").append(n);$(".result").show();$(".lesson").hide()}function showFlashCard(n){var i,t;if($("#btnNext").show(),n==-1){var r=$("#ale").val(),u=$("#av").val(),f=parseInt(vocas.length*8/10),t="";t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">';t+='   <div class="carousel-inner" role="listbox">';t+='       <div class="item active">';t+='           <div class="row text-center">';t+='               <div class="col-lg-12">';t+='                   <p class="text-info">Số câu đúng: '+correctVocas.length+"/"+vocas.length+"<\/p>";t+='                   <p class="text-info">Thời gian hoàn thành: '+completedTime+" giây<\/p>";t+='                   <p class="text-info">Kết quả: '+(correctVocas.length>=f?"Chúc mừng bạn đã vượt qua được bài kiểm tra":"Bạn đã không vượt qua được bài kiểm tra. Hãy ôn lại")+"<\/p>";t+="               <\/div>";t+="           <\/div>";t+='           <div class="row text-center">';t+='               <div class="col-lg-12">';t+='                   <a class="btn btn-navigator btn-lg require-login" href="'+r+'">HỌC TIẾP<\/a>';t+='                   <a class="btn btn-navigator btn-lg require-login" href="'+u+'">ÔN TẬP<\/a>';t+="               <\/div>";t+="           <\/div>";t+="<\/br>";t+='           <div class="row text-center">';t+='               <div class="col-lg-12">';t+='                   <a class="btn btn-navigator btn-lg require-login" href="'+r+'">ÔN SỔ TAY<\/a>';t+='                   <a class="btn btn-navigator btn-lg require-login" href="'+u+'">TRỞ VỀ<\/a>';t+="               <\/div>";t+="           <\/div>";t+="       <\/div>";t+="   <\/div>";t+="<\/div>";$("#flashCard").html(t);$("#btnNext").hide()}else i=searchVoca(n),i!=null&&(isPractice?(t=showPractise(i),$("#flashCard").html(t),i.TestSkill=="3"&&speak(i.UrlAudio)):(vocas[currentIndex].HasLearnt="1",vocas[currentIndex].IsDone="1",t=showLearning(i),$("#flashCard").html(t),speak(i.UrlAudio),isPractice=!0))}function showFlashCard(n){var t;$("#btnNext").show();n!=null&&(isPractice?(t=showPractise(n),$("#flashCard").html(t)):(vocas[currentIndex].HasLearnt="1",vocas[currentIndex].IsDone="1",t=showLearning(n),$("#flashCard").html(t),speak(n.UrlAudio),isPractice=!0))}function createQuizz(n){var t;if(console.log(n),t=vocas[n],t){var f=Math.floor(Math.random()*4+1),i=1,r=2,u=3;t.TestType=1;t.TestSkill=Math.floor(Math.random()*3+1);switch(f){case 1:for(t.CorrectResult=1,t.CorrectUrlAudio=t.UrlAudio,t.Hiragana1=t.Hiragana,t.Katakana1=t.Katakana,t.Kanji1=t.Kanji,t.Result1=t.TestSkill==2?t.VMeaning:t.DisplayType=="3"?t.Kanji:t.DisplayType=="2"?t.Katakana+"<hr>":t.Hiragana+"<hr>"+t.Kanji,t.ResultUrlAudio1=t.UrlAudio;t.VocabularyCode==vocas[i].VocabularyCode;)i=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana2=vocas[i].Hiragana,t.Katakana2=vocas[i].Katakana,t.Kanji2=vocas[i].Kanji,t.Result2=t.TestSkill==2?vocas[i].VMeaning:vocas[i].DisplayType=="3"?vocas[i].Kanji:vocas[i].DisplayType=="2"?vocas[i].Katakana+"<hr>":vocas[i].Hiragana+"<hr>"+vocas[i].Kanji,t.ResultUrlAudio2=vocas[i].UrlAudio;t.VocabularyCode==vocas[r].VocabularyCode||vocas[i].VocabularyCode==vocas[r].VocabularyCode;)r=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana3=vocas[r].Hiragana,t.Katakana3=vocas[r].Katakana,t.Kanji3=vocas[r].Kanji,t.Result3=t.TestSkill==2?vocas[r].VMeaning:vocas[r].DisplayType=="3"?vocas[r].Kanji:vocas[r].DisplayType=="2"?vocas[r].Katakana+"<hr>":vocas[r].Hiragana+"<hr>"+vocas[r].Kanji,t.ResultUrlAudio3=vocas[r].UrlAudio;t.VocabularyCode==vocas[u].VocabularyCode||vocas[i].VocabularyCode==vocas[u].VocabularyCode||vocas[r].VocabularyCode==vocas[u].VocabularyCode;)u=Math.floor(Math.random()*vocas.length+1)-1;t.Hiragana4=vocas[u].Hiragana;t.Katakana4=vocas[u].Katakana;t.Kanji4=vocas[u].Kanji;t.Result4=t.TestSkill==2?vocas[u].VMeaning:vocas[u].DisplayType=="3"?vocas[u].Kanji:vocas[u].DisplayType=="2"?vocas[u].Katakana+"<hr>":vocas[u].Hiragana+"<hr>"+vocas[u].Kanji;t.ResultUrlAudio4=vocas[u].UrlAudio;break;case 2:for(t.CorrectResult=2,t.CorrectUrlAudio=t.UrlAudio,t.Hiragana2=t.Hiragana,t.Katakana2=t.Katakana,t.Kanji2=t.Kanji,t.Result2=t.TestSkill==2?t.VMeaning:t.DisplayType=="3"?t.Kanji:t.DisplayType=="2"?t.Katakana+"<hr>":t.Hiragana+"<hr>"+t.Kanji,t.ResultUrlAudio2=t.UrlAudio;t.VocabularyCode==vocas[i].VocabularyCode;)i=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana1=vocas[i].Hiragana,t.Katakana1=vocas[i].Katakana,t.Kanji1=vocas[i].Kanji,t.Result1=t.TestSkill==2?vocas[i].VMeaning:vocas[i].DisplayType=="3"?vocas[i].Kanji:vocas[i].DisplayType=="2"?vocas[i].Katakana+"<hr>":vocas[i].Hiragana+"<hr>"+vocas[i].Kanji,t.ResultUrlAudio1=vocas[i].UrlAudio;t.VocabularyCode==vocas[r].VocabularyCode||vocas[i].VocabularyCode==vocas[r].VocabularyCode;)r=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana3=vocas[r].Hiragana,t.Katakana3=vocas[r].Katakana,t.Kanji3=vocas[r].Kanji,t.Result3=t.TestSkill==2?vocas[r].VMeaning:vocas[r].DisplayType=="3"?vocas[r].Kanji:vocas[r].DisplayType=="2"?vocas[r].Katakana+"<hr>":vocas[r].Hiragana+"<hr>"+vocas[r].Kanji,t.ResultUrlAudio3=vocas[r].UrlAudio;t.VocabularyCode==vocas[u].VocabularyCode||vocas[i].VocabularyCode==vocas[u].VocabularyCode||vocas[r].VocabularyCode==vocas[u].VocabularyCode;)u=Math.floor(Math.random()*vocas.length+1)-1;t.Hiragana4=vocas[u].Hiragana;t.Katakana4=vocas[u].Katakana;t.Kanji4=vocas[u].Kanji;t.Result4=t.TestSkill==2?vocas[u].VMeaning:vocas[u].DisplayType=="3"?vocas[u].Kanji:vocas[u].DisplayType=="2"?vocas[u].Katakana+"<hr>":vocas[u].Hiragana+"<hr>"+vocas[u].Kanji;t.ResultUrlAudio4=vocas[u].UrlAudio;break;case 3:for(t.CorrectResult=3,t.CorrectUrlAudio=t.UrlAudio,t.Hiragana3=t.Hiragana,t.Katakana3=t.Katakana,t.Kanji3=t.Kanji,t.Result3=t.TestSkill==2?t.VMeaning:t.DisplayType=="3"?t.Kanji:t.DisplayType=="2"?t.Katakana+"<hr>":t.Hiragana+"<hr>"+t.Kanji,t.ResultUrlAudio3=t.UrlAudio;t.VocabularyCode==vocas[i].VocabularyCode;)i=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana1=vocas[i].Hiragana,t.Katakana1=vocas[i].Katakana,t.Kanji1=vocas[i].Kanji,t.Result1=t.TestSkill==2?vocas[i].VMeaning:vocas[i].DisplayType=="3"?vocas[i].Kanji:vocas[i].DisplayType=="2"?vocas[i].Katakana+"<hr>":vocas[i].Hiragana+"<hr>"+vocas[i].Kanji,t.ResultUrlAudio1=vocas[i].UrlAudio;t.VocabularyCode==vocas[r].VocabularyCode||vocas[i].VocabularyCode==vocas[r].VocabularyCode;)r=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana2=vocas[r].Hiragana,t.Katakana2=vocas[r].Katakana,t.Kanji2=vocas[r].Kanji,t.Result2=t.TestSkill==2?vocas[r].VMeaning:vocas[r].DisplayType=="3"?vocas[r].Kanji:vocas[r].DisplayType=="2"?vocas[r].Katakana+"<hr>":vocas[r].Hiragana+"<hr>"+vocas[r].Kanji,t.ResultUrlAudio2=vocas[r].UrlAudio;t.VocabularyCode==vocas[u].VocabularyCode||vocas[i].VocabularyCode==vocas[u].VocabularyCode||vocas[r].VocabularyCode==vocas[u].VocabularyCode;)u=Math.floor(Math.random()*vocas.length+1)-1;t.Hiragana4=vocas[u].Hiragana;t.Katakana4=vocas[u].Katakana;t.Kanji4=vocas[u].Kanji;t.Result4=t.TestSkill==2?vocas[u].VMeaning:vocas[u].DisplayType=="3"?vocas[u].Kanji:vocas[u].DisplayType=="2"?vocas[u].Katakana+"<hr>":vocas[u].Hiragana+"<hr>"+vocas[u].Kanji;t.ResultUrlAudio4=vocas[u].UrlAudio;break;case 4:for(t.CorrectResult=4,t.CorrectUrlAudio=t.UrlAudio,t.Hiragana4=t.Hiragana,t.Katakana4=t.Katakana,t.Kanji4=t.Kanji,t.TestSkill==2?t.Result4=t.VMeaning:(t.Result4=t.DisplayType=="3"?t.Kanji:t.DisplayType=="2"?t.Katakana+"<hr>":t.Hiragana+"<hr>"+t.Kanji,t.ResultUrlAudio4=t.UrlAudio);t.VocabularyCode==vocas[i].VocabularyCode;)i=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana1=vocas[i].Hiragana,t.Katakana1=vocas[i].Katakana,t.Kanji1=vocas[i].Kanji,t.Result1=t.TestSkill==2?vocas[i].VMeaning:vocas[i].DisplayType=="3"?vocas[i].Kanji:vocas[i].DisplayType=="2"?vocas[i].Katakana+"<hr>":vocas[i].Hiragana+"<hr>"+vocas[i].Kanji,t.ResultUrlAudio1=vocas[i].UrlAudio;t.VocabularyCode==vocas[r].VocabularyCode||vocas[i].VocabularyCode==vocas[r].VocabularyCode;)r=Math.floor(Math.random()*vocas.length+1)-1;for(t.Hiragana2=vocas[r].Hiragana,t.Katakana2=vocas[r].Katakana,t.Kanji2=vocas[r].Kanji,t.Result2=t.TestSkill==2?vocas[r].VMeaning:vocas[r].DisplayType=="3"?vocas[r].Kanji:vocas[r].DisplayType=="2"?vocas[r].Katakana+"<hr>":vocas[r].Hiragana+"<hr>"+vocas[r].Kanji,t.ResultUrlAudio2=vocas[r].UrlAudio;t.VocabularyCode==vocas[u].VocabularyCode||vocas[i].VocabularyCode==vocas[u].VocabularyCode||vocas[r].VocabularyCode==vocas[u].VocabularyCode;)u=Math.floor(Math.random()*vocas.length+1)-1;t.Hiragana3=vocas[u].Hiragana;t.Katakana3=vocas[u].Katakana;t.Kanji3=vocas[u].Kanji;t.Result3=t.TestSkill==2?vocas[u].VMeaning:vocas[u].DisplayType=="3"?vocas[u].Kanji:vocas[u].DisplayType=="2"?vocas[u].Katakana+"<hr>":vocas[u].Hiragana+"<hr>"+vocas[u].Kanji;t.ResultUrlAudio3=vocas[u].UrlAudio}}return t}function calculateProgress(){for(var t=0,n=0;n<vocas.length;n++)t+=parseInt(vocas[n].Level);return t}function showResult(n){var r=$("#ale").val(),i=searchVoca(n),t;if(i!=null)if(t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row">',t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu: <strong><span id="currentVoca">'+(n+1)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+="           <\/div>",t+='           <div class="row">',t+='               <div class="col-lg-4 col-md-4 col-xs-6">',t+='                   <img class="img-rounded" src="'+getLink(i.UrlImage)+'" alt="Từ vựng tiếng Nhật" height="300px" width="100%"/>',t+="               <\/div>",t+='               <div class="col-lg-8 col-md-8 col-xs-6">',i.TestType=="1"?(t+="<label>Chọn từ đúng<\/label>",t+='<div class="list-group">',t+='   <a href="#" id="result1" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result1+'<\/a><span id="span1"><\/span>',t+='   <a href="#" id="result2" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result2+'<\/a><span id="span2"><\/span>',t+='   <a href="#" id="result3" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result3+'<\/a><span id="span3"><\/span>',t+='   <a href="#" id="result4" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result4+'<\/a><span id="span4"><\/span>',t+="<\/div>"):i.TestType=="2"&&(t+='<div class="alert alert-primary" role="alert"><span class="glyphicon glyphicon-ok" aria-hidden="true"><\/span><span class="sr-only">Error:<\/span> Từ vựng: '+i.Hiragana+"&nbsp;&nbsp;"+i.Katakana+"&nbsp;&nbsp;"+i.Kanji+"&nbsp;&nbsp;"+i.Romaji+"<\/div>",t+='<div id="divInputResult" class="" role="alert"><span id="spanInputResult" class="" aria-hidden="true"><\/span><span class="sr-only">Error:<\/span> Từ của bạn: '+i.SelectedValue+"<\/div>"),t+="               <\/div>",t+="           <\/div>",t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult('+(n-1)+'); return false;">Trước<\/a>',t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult('+(n+1)+'); return false;">Tiếp<\/a>',t+='                   <a href="'+r+'" role="button" class="btn btn-navigator btn-lg" >Quay về<\/a>',t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),i.TestType=="1"){switch(i.CorrectResult){case 1:$("#result1").addClass("list-group-item active");$("#span1").addClass("glyphicon glyphicon-ok ok");break;case 2:$("#result2").addClass("list-group-item active");$("#span2").addClass("glyphicon glyphicon-ok ok");break;case 3:$("#result3").addClass("list-group-item active");$("#span3").addClass("glyphicon glyphicon-ok ok");break;case 4:$("#result4").addClass("list-group-item active");$("#span4").addClass("glyphicon glyphicon-ok ok")}if(i.IsCorrect=="0")switch(i.SelectedValue){case"1":$("#result1").addClass("list-group-item-danger");$("#span1").addClass("glyphicon glyphicon-remove error");break;case"2":$("#result2").addClass("list-group-item-danger");$("#span2").addClass("glyphicon glyphicon-remove error");break;case"3":$("#result3").addClass("list-group-item-danger");$("#span3").addClass("glyphicon glyphicon-remove error");break;case"4":$("#result4").addClass("list-group-item-danger");$("#span4").addClass("glyphicon glyphicon-remove error")}}else i.TestType=="2"&&(i.IsCorrect=="0"?($("#divInputResult").addClass("alert alert-danger"),$("#spanInputResult").addClass("glyphicon glyphicon-remove")):($("#divInputResult").addClass("alert alert-primary"),$("#spanInputResult").addClass("glyphicon glyphicon-ok")))}function showLearning(n){var t="";if(n.DisplayType=="3"){t+='<div class="col-md-12 padding-0">';t+='   <div class="col-lg-4 col-md-4 hidden-xs hidden-sm">';t+='       <img class="img-responsive" src="'+getLink(n.UrlImage)+'" alt="Từ vựng tiếng Nhật"  style="height: 250px">';t+="   <\/div>";n.Hiragana!=""?(t+='   <div class="col-lg-7 col-md-7 col-xs-10"><h3><strong>'+n.Hiragana+'  <\/strong><a href="#" onclick="speak(\''+n.UrlAudio+'\'); return false;"><i class="fa fa-volume-up"><\/i><\/a><\/h3>',t+="       <p><strong>"+n.Romaji+"<\/strong><\/p>"):n.Katakana!=""&&(t+='   <div class="col-lg-7 col-md-7 col-xs-10"><h3><strong>'+n.Katakana+'  <\/strong><a href="#" onclick="speak(\''+n.UrlAudio_Katakana+'\'); return false;"><i class="fa fa-volume-up"><\/i><\/a><\/h3>',t+="       <p><strong>"+n.Romaji_Katakana+"<\/strong><\/p>");t+="       <h3><strong>"+n.Kanji+"<\/strong><\/h3>";t+="       <h4><strong>"+n.VMeaning+"<\/strong><\/h4>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>1?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>3?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>5?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>7?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>9?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+="   <\/div>";t+='<div class="col-lg-1 col-md-1 col-xs-2">';t+='   <div class="btn-group" role="group">';t+='   <button type="button" class="btn btn-circle btn-mn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">';t+='       <span class="icon-list"><\/span>';t+="   <\/button>";t+='   <ul class="dropdown-menu">';t+=n.HasMarked=="1"?'<li><a href="#" onclick="mark();" class="mark" data-value="marked"><span class="fa fa-book"><\/span> Đã lưu<\/a><\/li>':'<li><a href="#" onclick="mark();" class="mark" data-value="unmarked"><span class="fa fa-plus"><\/span> Lưu sổ tay<\/a><\/li>';t+=n.IsIgnore=="1"?'<li><a href="#" onclick="ignore();" class="ignore" data-value="marked"><span class="fa fa-unlock-alt"><\/span> Đã bỏ<\/a><\/li>':'<li><a href="#" onclick="ignore();" class="ignore" data-value="unmarked"><span class="fa fa-trash"><\/span> Bỏ qua<\/a><\/li>';t+="   <\/ul>";t+="<\/div>";t+="<\/div>";t+="<\/div>";t+="<hr />";t+='<div class="col-md-12 padding-0">';t+='   <div class="col-md-4">';t+="   <\/div>";t+='   <div class="col-md-8">';t+='       <button onclick="draw();" class="btn btn-default">Viết<\/button>';var i=n.DisplayType=="1"&&n.Kanji==""?"checked = 'checked'":"",r=n.DisplayType=="2"?"checked = 'checked'":"",u=n.DisplayType=="3"||n.DisplayType=="1"&&n.Kanji!=""?"checked = 'checked'":"";t+='       <input id="rdoHiragana" type="radio" name="rdoDraw" '+i+">Hiragana";t+='       <input id="rdoKatakana" type="radio" name="rdoDraw" '+r+">Katakana";t+='       <input id="rdoKanji" type="radio" name="rdoDraw" '+u+">Kanji";t+="   <\/div>";t+="<\/div>";t+='<div class="col-md-12 padding-0">';t+='   <div class="col-md-12 text-center" id="draw"><\/div>';t+="<\/div>"}else{t+='<div class="col-md-12 padding-0">';t+='   <div class="col-lg-4 col-md-4 hidden-xs hidden-sm">';t+='       <img class="img-responsive" src="'+getLink(n.UrlImage)+'" alt="Từ vựng tiếng Nhật"  style="height: 250px">';t+="   <\/div>";n.Hiragana!=""?(t+='   <div class="col-lg-7 col-md-7 col-xs-10"><h3><strong>'+n.Hiragana+'  <\/strong><a href="#" onclick="speak(\''+n.UrlAudio+'\'); return false;"><i class="fa fa-volume-up"><\/i><\/a><\/h3>',t+="       <p><strong>"+n.Romaji+"<\/strong><\/p>"):n.Katakana!=""&&(t+='   <div class="col-lg-7 col-md-7 col-xs-10"><h3><strong>'+n.Katakana+'  <\/strong><a href="#" onclick="speak(\''+n.UrlAudio_Katakana+'\'); return false;"><i class="fa fa-volume-up"><\/i><\/a><\/h3>',t+="       <p><strong>"+n.Romaji_Katakana+"<\/strong><\/p>");t+="       <h3><strong>"+n.Kanji+"<\/strong><\/h3>";t+="       <h4><strong>"+n.VMeaning+"<\/strong><\/h4>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>1?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>3?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>5?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>7?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>9?"primary":"default")+'" style="width:15px;height:15px;">';t+='<span class="fa fa-heart"><\/span>';t+="<\/button>";t+="   <\/div>";t+='<div class="col-lg-1 col-md-1 col-xs-2">';t+='   <div class="btn-group" role="group">';t+='   <button type="button" class="btn btn-circle btn-mn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">';t+='       <span class="icon-list"><\/span>';t+="   <\/button>";t+='   <ul class="dropdown-menu">';t+=n.HasMarked=="1"?'<li><a href="#" onclick="mark();" class="mark" data-value="marked"><span class="fa fa-book"><\/span> Đã lưu<\/a><\/li>':'<li><a href="#" onclick="mark();" class="mark" data-value="unmarked"><span class="fa fa-plus"><\/span> Lưu sổ tay<\/a><\/li>';t+=n.IsIgnore=="1"?'<li><a href="#" onclick="ignore();" class="ignore" data-value="marked"><span class="fa fa-unlock-alt"><\/span> Đã bỏ<\/a><\/li>':'<li><a href="#" onclick="ignore();" class="ignore" data-value="unmarked"><span class="fa fa-trash"><\/span> Bỏ qua<\/a><\/li>';t+="   <\/ul>";t+="<\/div>";t+="<\/div>";t+="<\/div>";t+="<hr />";t+='<div class="col-md-12 padding-0">';t+='   <div class="col-md-4">';t+="   <\/div>";t+='   <div class="col-md-8">';t+='       <button onclick="draw();" class="btn btn-default">Viết<\/button>';var i=n.DisplayType=="1"&&n.Kanji==""?"checked = 'checked'":"",r=n.DisplayType=="2"?"checked = 'checked'":"",u=n.DisplayType=="3"||n.DisplayType=="1"&&n.Kanji!=""?"checked = 'checked'":"";t+='       <input id="rdoHiragana" type="radio" name="rdoDraw" '+i+">Hiragana";t+='       <input id="rdoKatakana" type="radio" name="rdoDraw" '+r+">Katakana";t+='       <input id="rdoKanji" type="radio" name="rdoDraw" '+u+">Kanji";t+="   <\/div>";t+="<\/div>";t+='<div class="col-md-12 padding-0">';t+='   <div class="col-md-12 text-center" id="draw"><\/div>';t+="<\/div>"}return t}function showPractise(n){var t="",r,u,i;return n.TestSkill=="2"&&speak(n.UrlAudio),r=parseInt($("#rtp").val()),u=parseFloat($("#vsf").val()),t+='       <div class="item active">',t+='           <div class="row text-center" id="item-active">',t+='   <div class="col-lg-11 col-md-11 col-xs-10">',n.TestSkill=="2"?(i=n.DisplayType=="3"?n.Kanji:n.DisplayType=="1"?n.Hiragana+(n.Kanji!=""?" | "+n.Kanji:""):n.Katakana,t+='                   <h3><span class="glyphicon glyphicon-question-sign error" aria-hidden="true"><\/span> <label>'+i+"<\/label><\/h3>"):t+='                   <h3><span class="glyphicon glyphicon-question-sign error" aria-hidden="true"><\/span> <label>'+n.VMeaning+"<\/label><\/h3>",t+="<\/div>",t+='<div class="col-lg-1 col-md-1 col-xs-2">',t+='   <div class="btn-group" role="group">',t+='   <button type="button" class="btn btn-circle btn-mn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',t+='       <span class="icon-list"><\/span>',t+="   <\/button>",t+='   <ul class="dropdown-menu">',t+=n.HasMarked=="1"?'<li><a href="#" onclick="mark();" class="mark" data-value="marked"><span class="fa fa-book"><\/span> Đã lưu<\/a><\/li>':'<li><a href="#" onclick="mark();" class="mark" data-value="unmarked"><span class="fa fa-plus"><\/span> Lưu sổ tay<\/a><\/li>',t+=n.IsIgnore=="1"?'<li><a href="#" onclick="ignore();" class="ignore" data-value="marked"><span class="fa fa-unlock-alt"><\/span> Đã bỏ<\/a><\/li>':'<li><a href="#" onclick="ignore();" class="ignore" data-value="unmarked"><span class="fa fa-trash"><\/span> Bỏ qua<\/a><\/li>',t+="   <\/ul>",t+="<\/div>",t+="<\/div>",t+="<\/div>",n.TestType=="1"&&(t+='<div class="row text-center">',t+="<label>Chọn từ đúng<\/label>",t+='<input type="hidden" id="correctValue" value="'+n.CorrectResult+'"/>',t+='<input type="hidden" id="correctUrlAudio" value="'+n.CorrectUrlAudio+'"/>',t+='<input type="hidden" id="selectedValue" />',t+="<\/div>",t+="<\/hr>",t+='<div class="row text-center">',t+='   <div class="col-lg-12 col-md-12 col-xs-12">',t+='       <a class="btn btn-quizz " href="#" id="result1" name="resultChoosing" onclick="selectValue(this, 1);return false;">1<br>'+n.Result1+"<\/a>",t+='       <input type="hidden" id="urlAudio1" />',t+='       <a class="btn btn-quizz " href="#" id="result2" name="resultChoosing" onclick="selectValue(this, 2);return false;">2<br>'+n.Result2+"<\/a>",t+='       <input type="hidden" id="urlAudio2" />',t+="   <\/div>",t+="<\/div>",t+='<div class="row text-center">',t+='   <div class="col-lg-12 col-md-12 col-xs-12">',t+='       <a class="btn btn-quizz " href="#" id="result3" name="resultChoosing" onclick="selectValue(this, 3);return false;">3<br>'+n.Result3+"<\/a>",t+='       <input type="hidden" id="urlAudio3" />',t+='       <a class="btn btn-quizz " href="#" id="result4" name="resultChoosing" onclick="selectValue(this, 4);return false;">4<br>'+n.Result4+"<\/a>",t+='       <input type="hidden" id="urlAudio4" />',t+="   <\/div>",t+="<\/div>"),t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+='   <div class="col-lg-12 col-md-12 col-xs-12 text-center">',t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>0?"primary":"default")+'" style="width:15px;height:15px;">',t+='<span class="fa fa-heart"><\/span>',t+="<\/button>",t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>2?"primary":"default")+'" style="width:15px;height:15px;">',t+='<span class="fa fa-heart"><\/span>',t+="<\/button>",t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>4?"primary":"default")+'" style="width:15px;height:15px;">',t+='<span class="fa fa-heart"><\/span>',t+="<\/button>",t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>6?"primary":"default")+'" style="width:15px;height:15px;">',t+='<span class="fa fa-heart"><\/span>',t+="<\/button>",t+='<button class=" btn btn-circle btn-mn btn-'+(n.Level>8?"primary":"default")+'" style="width:15px;height:15px;">',t+='<span class="fa fa-heart"><\/span>',t+="<\/button>",t+"<\/div>"}function selectValue(n,t){$(n).attr("disabled")!="disabled"&&($("#selectedValue").val(t),checkInput(quizzVoca))}function searchVoca(n){for(var t=0;t<vocas.length;t++)if(t==n)return vocas[t]}function draw(n){var t,i,r;$("#draw").html("");n?r=new Dmak(n,{element:"draw"}):(t=vocas[currentIndex],i="",t.DisplayType=="3"?i=t.Kanji:t!=null&&($("#rdoHiragana").is(":checked")&&t.Hiragana!=""?i=t.Hiragana:$("#rdoKatakana").is(":checked")&&t.Katakana!=""?i=t.Katakana:$("#rdoKanji").is(":checked")&&t.Kanji!=""&&(i=t.Kanji)),r=new Dmak(i,{element:"draw"}))}function showDrawing(){$("#modalDraw").modal()}function mark(){var n=$(".mark");n.attr("data-value")=="unmarked"?(n.animate().replaceWith('<a href="#" onclick="mark();" class="mark" data-value="marked"><span class="fa fa-book"><\/span> Đã lưu<\/a>'),vocas[currentIndex].HasMarked="1"):(n.animate().replaceWith('<a href="#" onclick="mark();" class="mark" data-value="unmarked"><span class="fa fa-plus"><\/span> Lưu sổ tay<\/a>'),vocas[currentIndex].HasMarked="0")}function ignore(){var n=$(".ignore");n.attr("data-value")=="unmarked"?(n.animate().replaceWith('<a href="#" onclick="ignore();" class="ignore" data-value="marked"><span class="fa fa-unlock-alt"><\/span> Đã bỏ<\/a>'),vocas[currentIndex].IsIgnore="1"):(n.animate().replaceWith('<a href="#" onclick="ignore();" class="ignore" data-value="unmarked"><span class="fa fa-trash"><\/span> Bỏ qua<\/a>'),vocas[currentIndex].IsIgnore="0")}var timePerVoca=15,completedTime=0,inCorrectVocas=[],correctVocas=[],vocas=[],isPass=!1,totalLevel=0,currentLevel=0,isPractice=!0,currentIndex=0,quizzVoca=[],maxLevel=10;$(document).ready(function(){var n,t;window.onbeforeunload=function(){if(vocas.length>0&&currentIndex>=0)return"Kết quả bài học sẽ không được ghi nhận nếu bạn thoát khỏi trang"};$(".result").hide();$(".lesson").show();n=new Audio("/Content/media/fail.wav");n.load();t=new Audio("/Content/media/tada.wav");t.load();currentIndex=0;isPractice=!1;$("#lt").val()=="1"?getTestVocas():getPracticeVocas();$("#btnNext").on("click",function(){isPractice?(quizzVoca=createQuizz(currentIndex),showFlashCard(quizzVoca,!1)):showFlashCard(quizzVoca,!0)});$(document).keydown(function(n){var t=n.keyCode?n.keyCode:n.which;if(n.ctrlKey){if(t==68)return draw(),!1;if(t==32&&!isPractice)return speak(quizzVoca.UrlAudio),!1}else if(t==32){if(!isPractice)return speak(quizzVoca.UrlAudio),!1}else{if(t==13)return $("#btnNext").trigger("click"),!1;if(t==49||t==97)return isPractice&&selectChoosingResult(1),!1;if(t==50||t==98)return isPractice&&selectChoosingResult(2),!1;if(t==51||t==99)return isPractice&&selectChoosingResult(3),!1;if(t==52||t==100)return isPractice&&selectChoosingResult(4),!1}})});
/*
//# sourceMappingURL=learningsession.min.js.map
*/