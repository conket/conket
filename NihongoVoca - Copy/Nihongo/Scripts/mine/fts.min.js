function updateFastTestVoca(){$.ajax({cache:!0,type:"post",async:!0,url:"/Library/"+$("#uft").val(),data:JSON.stringify(vocas[currentIndex]),dataType:"json",contentType:"application/json",success:function(n){n.ReturnCode!=0},error:function(n){return console.log(n.responseText),!1}})}function getFastTestVocas(){vocas=[];failArray=[];$.ajax({cache:!0,type:"get",async:!0,url:"/Library/"+$("#gft").val(),data:{id:$("#vcd").val()},dataType:"json",success:function(n){n.returnCode==$("#accessDenied").val()?window.location.href="/Account/RequireLogin":(n.vocabularies.length==0||$.each(n.vocabularies,function(n,t){vocas.push(t);failArray.push(t)}),completedTime=0,currentIndex=0,vocas.length>0?showFlashCard(currentIndex,!1):showFlashCard(-2,!1))},error:function(n){return console.log(n.responseText),!1}})}function getLink(n){return n}function speak(n){messageAudio!=null&&messageAudio.pause();messageAudio=new Audio(n);messageAudio.play()}function checkInput(){var t,i;if(completedTime+=timePerVoca-parseInt($("#timer").html()),currentIndex<vocas.length){if(vocas[currentIndex].TestType=="2"){var n=$("#inputAlphabet").val().toLowerCase().replace(/\s+/g,""),r=vocas[currentIndex].Romaji.toLowerCase().replace(/\s+/g,""),u=vocas[currentIndex].Hiragana.toLowerCase().replace(/\s+/g,""),f=vocas[currentIndex].Katakana.toLowerCase().replace(/\s+/g,""),e=vocas[currentIndex].Kanji.toLowerCase().replace(/\s+/g,"");vocas[currentIndex].SelectedValue=n;vocas[currentIndex].IsCorrect="1";n!=r&&n!=u&&n!=f&&n!=e?(vocas[currentIndex].IsCorrect="0",speak("/Content/media/fail.wav"),$("#result").html()):(speak("/Content/media/tada.wav"),correctVocas.push(vocas[currentIndex]))}else vocas[currentIndex].TestType=="1"&&(t=$("#selectedValue").val().toLowerCase().replace(/\s+/g,""),i=$("#correctValue").val().toLowerCase().replace(/\s+/g,""),vocas[currentIndex].SelectedValue=t,vocas[currentIndex].IsCorrect="1",t!=i?(speak("/Content/media/fail.wav"),vocas[currentIndex].IsCorrect="0"):(speak("/Content/media/tada.wav"),correctVocas.push(vocas[currentIndex])));updateFastTestVoca()}clearInterval(timer);currentIndex<vocas.length-1?timer=setInterval(function(){currentIndex++;showFlashCard(currentIndex,!1)},interval):(currentIndex=-1,showFlashCard(-1,!1));$("#inputAlphabet").attr("disabled","disabled");document.getElementById("test-content").style.cursor="not-allowed";$("#item-active").html("")}function showFlashCard(n){var r,i,t;$("#inputAlphabet").removeAttr("disabled");document.getElementById("test-content").style.cursor="auto";clearInterval(timer);n==-2?(t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',t+='                   <p class="text-info">Bạn đã thuộc các từ vựng trong bài này.<\/p>',t+='                   <p class="text-info">Hãy hoàn thành bài kiểm tra và tiếp tục các bài học tiếp theo<\/p>',t+="               <\/div>",t+="           <\/div>",t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',t+='                   <button type="button" class="btn btn-default btn-lg" onclick="window.history.back();">Trở về<\/button><\/p>',t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),$("#btnNext").hide()):n==-1?(r=$("#av").val(),t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',t+='                   <p class="text-info">Số câu đúng: '+correctVocas.length+"/"+vocas.length+"<\/p>",t+='                   <p class="text-info">Quá trình sàng lọc từ vựng hoàn tất<\/p>',t+="               <\/div>",t+="           <\/div>",t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',correctVocas.length<vocas.length*8/10?(t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult(0); return false;">Xem kết quả<\/a>',t+='                   <a href="'+r+'" role="button" class="btn btn-navigator btn-lg" >Học bài<\/a>'):(t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult(0); return false;">Xem kết quả<\/a>',t+='                   <a href="'+r+'" class="btn btn-navigator btn-lg" role="button" >Trở về<\/a>'),t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),$("#btnNext").hide()):(i=searchVoca(n),i!=null&&(t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row">',t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu: <strong><span id="currentVoca">'+(currentIndex+1)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu đúng: <strong><span id="correctVoca">'+correctVocas.length+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu sai: <strong><span id="correctVoca">'+(currentIndex-correctVocas.length)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+="           <\/div>",t+='           <div class="row" id="item-active">',t+='               <div class="col-lg-4 col-md-4 col-xs-6  text-center">',i.TestSkill!="1"?(t+='                   <img class="img-rounded" src="'+getLink(i.UrlImage)+'" alt="Từ vựng tiếng Nhật" height="300px" width="100%"/>',t+="<label>"+i.VMeaning+"<\/label>"):t+='                   <button type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-volume-up" aria-hidden="true">Nghe<\/span><\/button>',t+="               <\/div>",t+='               <div class="col-lg-8 col-md-8 col-xs-6">',i.TestType=="1"?(t+="<label>Chọn từ đúng<\/label>",t+='<input type="hidden" id="correctValue" value="'+i.CorrectResult+'"/>',t+='<input type="hidden" id="correctUrlAudio" value="'+i.CorrectUrlAudio+'"/>',t+='<input type="hidden" id="selectedValue" />',t+='<div class="list-group">',t+='   <a href="#" id="result1" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 1);return false;">'+i.Result1+'<\/a><input type="hidden" id="urlAudio1" />',t+='   <a href="#" id="result2" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 2);return false;">'+i.Result2+'<\/a><input type="hidden" id="urlAudio2" />',t+='   <a href="#" id="result3" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 3);return false;">'+i.Result3+'<\/a><input type="hidden" id="urlAudio3" />',t+='   <a href="#" id="result4" class="list-group-item" name="resultChoosing" onclick="selectValue(this, 4);return false;">'+i.Result4+'<\/a><input type="hidden" id="urlAudio4" />',t+="<\/div>"):i.TestType=="2"&&(t+="<label>Gõ từ đúng<\/label>",t+='<input type="text" class="form-control" id="inputAlphabet" maxlength="30">'),t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),i.TestType=="2"?($("#inputAlphabet").val(""),$("#inputAlphabet").focus(),$("#btnNext").show()):i.TestType=="1"&&$("#btnNext").hide(),i.TestSkill=="1"&&speak(i.UrlAudio)))}function showResult(n){var r=$("#av").val(),i=searchVoca(n),t;if(i!=null)if(t="",t+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',t+='   <div class="carousel-inner" role="listbox">',t+='       <div class="item active">',t+='           <div class="row">',t+='               <div class="col-lg-3">',t+='                   <p class="text-info">Câu: <strong><span id="currentVoca">'+(n+1)+"/"+vocas.length+"<\/span><\/strong><\/p>",t+="               <\/div>",t+="           <\/div>",t+='           <div class="row">',t+='               <div class="col-lg-4 col-md-4 col-xs-6">',t+='                   <img class="img-rounded" src="'+getLink(i.UrlImage)+'" alt="Từ vựng tiếng Nhật" height="300px" width="100%"/>',t+="               <\/div>",t+='               <div class="col-lg-8 col-md-8 col-xs-6">',i.TestType=="1"?(t+="<label>Chọn từ đúng<\/label>",t+='<div class="list-group">',t+='   <a href="#" id="result1" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result1+'<\/a><span id="span1"><\/span>',t+='   <a href="#" id="result2" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result2+'<\/a><span id="span2"><\/span>',t+='   <a href="#" id="result3" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result3+'<\/a><span id="span3"><\/span>',t+='   <a href="#" id="result4" class="list-group-item" name="resultChoosing" onclick="return false;">'+i.Result4+'<\/a><span id="span4"><\/span>',t+="<\/div>"):i.TestType=="2"&&(t+='<div class="alert alert-primary" role="alert"><span class="glyphicon glyphicon-ok" aria-hidden="true"><\/span><span class="sr-only">Error:<\/span> Từ vựng: '+i.Hiragana+"&nbsp;&nbsp;"+i.Katakana+"&nbsp;&nbsp;"+i.Kanji+"&nbsp;&nbsp;"+i.Romaji+"<\/div>",t+='<div id="divInputResult" class="" role="alert"><span id="spanInputResult" class="" aria-hidden="true"><\/span><span class="sr-only">Error:<\/span> Từ của bạn: '+i.SelectedValue+"<\/div>"),t+="               <\/div>",t+="           <\/div>",t+='           <div class="row text-center">',t+='               <div class="col-lg-12">',t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult('+(n-1)+'); return false;">Trước<\/a>',t+='                   <a href="#" role="button" class="btn btn-navigator btn-lg" onclick="showResult('+(n+1)+'); return false;">Tiếp<\/a>',t+='                   <a href="'+r+'" role="button" class="btn btn-navigator btn-lg" >Học bài<\/a>',t+="               <\/div>",t+="           <\/div>",t+="       <\/div>",t+="   <\/div>",t+="<\/div>",$("#flashCard").html(t),i.TestType=="1"){switch(i.CorrectResult){case 1:$("#result1").addClass("list-group-item active");$("#span1").addClass("glyphicon glyphicon-ok ok");break;case 2:$("#result2").addClass("list-group-item active");$("#span2").addClass("glyphicon glyphicon-ok ok");break;case 3:$("#result3").addClass("list-group-item active");$("#span3").addClass("glyphicon glyphicon-ok ok");break;case 4:$("#result4").addClass("list-group-item active");$("#span4").addClass("glyphicon glyphicon-ok ok")}if(i.IsCorrect=="0")switch(i.SelectedValue){case"1":$("#result1").addClass("list-group-item-danger");$("#span1").addClass("glyphicon glyphicon-remove error");break;case"2":$("#result2").addClass("list-group-item-danger");$("#span2").addClass("glyphicon glyphicon-remove error");break;case"3":$("#result3").addClass("list-group-item-danger");$("#span3").addClass("glyphicon glyphicon-remove error");break;case"4":$("#result4").addClass("list-group-item-danger");$("#span4").addClass("glyphicon glyphicon-remove error")}}else i.TestType=="2"&&(i.IsCorrect=="0"?($("#divInputResult").addClass("alert alert-danger"),$("#spanInputResult").addClass("glyphicon glyphicon-remove")):($("#divInputResult").addClass("alert alert-primary"),$("#spanInputResult").addClass("glyphicon glyphicon-ok")))}function selectValue(n,t){$("#selectedValue").val(t);$("#btnNext").trigger("click")}function clearChoosing(){$("a[name=resultChoosing]").each(function(){$(this).prop("class","list-group-item")})}function searchVoca(n){for(var t=0;t<vocas.length;t++)if(t==n)return vocas[t]}var timePerVoca=15,completedTime=0,correctVocas=[],vocas=[],currentIndex=0,timer,interval,messageAudio;$(document).ready(function(){getFastTestVocas();$("#btnNext").on("click",function(){var n,t;if(vocas[currentIndex].TestType=="2"){if(n=$("#inputAlphabet").val().toLowerCase().replace(/\s+/g,""),n=="")return alert("Vui lòng nhập giá trị!"),$("#inputAlphabet").val(""),$("#inputAlphabet").focus(),!1}else if(vocas[currentIndex].TestType=="1"&&(t=$("#selectedValue").val().toLowerCase().replace(/\s+/g,""),t==""))return alert("Vui lòng chọn 1 giá trị!"),!1;checkInput()});$(document).keydown(function(n){var t=n.keyCode?n.keyCode:n.which;return t==13?(currentIndex>=0&&currentIndex<vocas.length&&$("#btnNext").trigger("click"),!1):t==32?(currentIndex>=0&&currentIndex<vocas.length&&vocas[currentIndex].TestSkill=="1"&&speak(vocas[currentIndex].UrlAudio),!1):void 0})});interval=1500;
/*
//# sourceMappingURL=fts.min.js.map
*/