function updateHasMarked(){if(vocas[currentIndex].HasMarked=="1"){alert("Từ vựng này đã có trong Sổ tay");return}vocas[currentIndex].HasMarked="1";vocas.length>0&&$.ajax({cache:!0,type:"post",async:!0,url:"/Library/"+$("#uhm").val(),data:JSON.stringify(vocas[currentIndex]),dataType:"json",contentType:"application/json",success:function(n){n.ReturnCode==accessDenied?(vocas[currentIndex].HasMarked="0",window.location.href="/Account/RequireLogin"):n.ReturnCode!=0?(vocas[currentIndex].HasMarked="0",alert("Có lỗi xảy ra")):alert("Đã thêm vào Sổ tay của bạn")},error:function(n){return console.log(n.responseText),!1}})}function getVocas(n){vocas=[];failArray=[];var t=$("#vcd").val(),i=$("#accessDenied").val();$.ajax({cache:!0,type:"get",async:!0,url:"/Library/"+$("#gv").val(),data:{id:t,type:n},dataType:"json",success:function(t){if(t.returnCode==i)window.location.href="/Account/RequireLogin";else{typeof n=="undefined"&&(totalVoca=t.vocabularies.length,numOfHasLearnt=t.numOfHasLearnt);$.each(t.vocabularies,function(n,t){vocas.push(t);defaultVocas.push(t);var i=new Audio(t.UrlAudio);i.load()});var r=!0;n==1?vocas.length<=0&&(alert("Không có từ đã thuộc"),r=!1):n==0?vocas.length<=0&&(alert("Không có từ chưa thuộc"),r=!1):vocas.length<=0&&(alert("Không tìm thấy từ vựng"),r=!1);r&&(currentIndex=0,showFlashCard(currentIndex,!0))}},error:function(n){return console.log(n.responseText),!1},beforeSend:function(){$("#loadingModal").modal()},complete:function(){$("#loadingModal").modal("hide")}})}function setChosenWordList(){vocas=[];$("#choosingWords :checkbox:checked").each(function(n,t){for(var i=0;i<defaultVocas.length;i++)if($(t).val()==defaultVocas[i].ID){vocas.push(defaultVocas[i]);break}})}function loadSelectedVocas(){var n,t;for($("#tblVoca tr:not(:first)").remove(),n=0;n<selectedArray.length;n++)selectedArray[n]!=null&&(t="<tr>",t+="       <td>",t+="           <button type='button' class='btn btn-link' onclick='showSelectedFlashCard("+selectedArray[n].LineNumber+");'>"+selectedArray[n].Hiragana+";"+selectedArray[n].Katakana+"<\/button><\/td>",t+="       <\/td>",t+="       <td>",t+="           <span id='"+selectedArray[n].LineNumber+"' class='glyphicon glyphicon-remove' aria-hidden='true' onclick='removeVoca("+selectedArray[n].LineNumber+");'><\/span>",t+="       <\/td>",t+="   <\/tr>",$("#tblVoca tr:last").after(t))}function getLink(n){return n}function draw(){var n=vocas[currentIndex],t,i;$("#draw").html("");t="";n!=null&&($("#rdoHiragana").is(":checked")&&n.Hiragana!=""?t=n.Hiragana:$("#rdoKatakana").is(":checked")&&n.Katakana!=""?t=n.Katakana:$("#rdoKanji").is(":checked")&&n.Kanji!=""&&(t=n.Kanji));i=new Dmak(t,{element:"draw"})}function showDrawing(){$("#modalDraw").modal()}function showFlashCard(n,t){var r=searchVoca(n),i,u;if(r!=null){if(i="",i+='<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">',i+='   <div class="carousel-inner" role="listbox">',i+='       <div class="item active">',i+='           <div class="row">',i+='               <div class="col-lg-4 col-md-4 col-xs-12">',i+=r.DisplayType=="3"?'                   <p class="text-info text-center" style="font-size: 150px;">'+r.Kanji+"<\/p>":'                   <img class="img-responsive" src="'+getLink(r.UrlImage)+'" alt="Từ vựng tiếng Nhật" style="height: 300px" />',i+="               <\/div>",i+='               <div class="col-lg-8 col-md-8 col-xs-12">',i+='                   <p class="text-info">Định nghĩa<\/p>',i+='                   <p class="text-default">'+r.Description+"<\/p>",r.DisplayType=="3"&&(i+='                   <p class="text-default">'+r.Remembering+"<\/p>"),i+="               <\/div>",i+="           <\/div>",i+="       <\/div>",i+='       <div class="item">',r.DisplayType=="3")i+='           <div class="row">',i+='               <div class="col-md-2 col-xs-2">',i+="               <\/div>",i+='               <div class="col-md-3 col-xs-3">',i+='                   <h3><p class="text-info" style="font-size: 50px;">'+r.Kanji+'<\/p><span class="selected glyphicon glyphicon-volume-up" aria-hidden="true" onclick="speak(\''+r.UrlAudio+"');\"><\/span><\/h3>",i+="               <\/div>",i+='               <div class="col-md-7 col-xs-7">',i+='                   <p class="text-default"><strong>Hán Việt<\/strong>: '+r.Pinyin+"<\/p>",i+='                   <p class="text-default"><strong>Nghĩa<\/strong>: '+r.VMeaning+"<\/p>",i+='                   <p class="text-default"><strong>Cách nhớ<\/strong>: '+r.Remembering+"<\/p>",i+="               <\/div>",i+="           <\/div>",i+='           <div class="row">',i+='               <div class="col-md-2 hidden-xs">',i+="               <\/div>",i+='               <div class="col-md-3 col-xs-3">',i+='                   <div class="row">',i+='                       <div class="col-md-12">',i+='                           <p class="text-default"><strong>On<\/strong>:<\/p>',r.OnReading!=""&&(i+='                       <p class="text-default">'+r.OnReading+"<\/p>"),r.OnReading2!=""&&(i+='                       <p class="text-default">'+r.OnReading2+"<\/p>"),i+='                           <p class="text-default"><strong>Kun<\/strong>:<\/p>',r.KunReading!=""&&(i+='                       <p class="text-default">'+r.KunReading+"<\/p>"),r.KunReading2!=""&&(i+='                       <p class="text-default">'+r.KunReading2+"<\/p>"),i+="                       <\/div>",i+="                   <\/div>",i+="               <\/div>",i+='               <div class="col-md-7 col-xs-9">',i+='                   <div class="row">',i+='                       <div class="col-md-2 col-xs-3">',i+='                           <p class="text-default"><a href="#" class="drawKanji" data-toggle="tooltip" title="Nhấp để xem cách viết" onclick="drawKanji(event, this);">'+r.ExKanji1+"<\/a><\/p>",i+="                       <\/div>",i+='                       <div class="col-md-2 col-xs-3">',i+='                           <p class="text-default">'+r.ExReading1+"<\/p>",i+="                       <\/div>",i+='                       <div class="col-md-3 col-xs-3">',i+='                           <p class="text-default">'+r.ExVMeaning1+"<\/p>",i+="                       <\/div>",i+="                   <\/div>",i+='                   <div class="row">',i+='                       <div class="col-md-2 col-xs-3">',i+='                           <p class="text-default"><a href="#" class="drawKanji" data-toggle="tooltip" title="Nhấp để xem cách viết" onclick="drawKanji(event, this);">'+r.ExKanji2+"<\/a><\/p>",i+="                       <\/div>",i+='                       <div class="col-md-2 col-xs-3">',i+='                           <p class="text-default">'+r.ExReading2+"<\/p>",i+="                       <\/div>",i+='                       <div class="col-md-3 col-xs-3">',i+='                           <p class="text-default">'+r.ExVMeaning2+"<\/p>",i+="                       <\/div>",i+="                   <\/div>",i+='                   <div class="row">',i+='                       <div class="col-md-2 col-xs-3">',i+='                           <p class="text-default"><a href="#" class="drawKanji" data-toggle="tooltip" title="Nhấp để xem cách viết" onclick="drawKanji(event, this);">'+r.ExKanji3+"<\/a><\/p>",i+="                       <\/div>",i+='                       <div class="col-md-2 col-xs-3">',i+='                           <p class="text-default">'+r.ExReading3+"<\/p>",i+="                       <\/div>",i+='                       <div class="col-md-3 col-xs-3">',i+='                           <p class="text-default">'+r.ExVMeaning3+"<\/p>",i+="                       <\/div>",i+="                   <\/div>",i+="               <\/div>",i+="           <\/div>",i+='           <div class="row">',i+='               <div class="col-md-2 col-xs-2">',i+="               <\/div>",i+='               <div class="col-md-2 col-xs-10">',i+='                   <button onclick="draw();" class="btn btn-default" data-toggle="tooltip" title="Nhấp để xem cách viết (Ctrl-D)">Cách viết<\/button>',i+="               <\/div>",i+='               <div class="col-md-6">',i+='                   <div class="col-md-10 col-xs-10" id="draw"><\/div>',i+="               <\/div>",i+='               <div class="col-md-1 hidden">',i+='                   <label class="radio-inline"><input type="radio" name="rdoDraw" id="rdoKanji" checked="checked">Kanji<\/label>',i+="               <\/div>",i+="           <\/div>";else{i+='           <div class="row">';i+='               <div class="col-lg-4 col-md-4 hidden-xs hidden-sm">';i+='                   <img class="img-responsive" src="'+getLink(r.UrlImage)+'" alt="Từ vựng tiếng Nhật" style="height: 300px" />';i+="               <\/div>";i+='               <div class="col-lg-8 col-md-8">';i+='                   <div class="row">';i+='                       <div class="col-xs-2">';i+="                       <\/div>";i+='                       <div class="col-md-12 col-xs-10">';i+='                           <h4><a href="#" onclick="speak(\''+r.UrlAudio+'\'); return false;" data-toggle="tooltip" title="Nhấp để nghe đọc"><p class="text-info zoom-content-learning">'+r.Hiragana+"<\/p><\/a><\/h4>";r.Hiragana!=""&&(i+='                       <p class="text-default">'+r.Romaji);i+='                           <h4><a href="#" onclick="speak(\''+r.UrlAudio_Katakana+'\'); return false;" data-toggle="tooltip" title="Nhấp để nghe đọc"><p class="text-info zoom-content-learning">'+r.Katakana+"<\/p><\/a><\/h4>";r.Katakana!=""&&(i+='                       <p class="text-default">'+r.Romaji_Katakana);i+='                           <h4><a href="#" onclick="speak(\''+r.UrlAudio+'\'); return false;" data-toggle="tooltip" title="Nhấp để nghe đọc"><p class="text-info zoom-content-learning">'+r.Kanji+"<\/p><\/a><\/h4>";i+='                           <p class="text-default">'+r.VMeaning+"<\/p>";i+="                       <\/div>";i+="                   <\/div>";i+='                   <hr class="divider" />';i+='                   <div class="row">';i+='                       <div class="col-xs-2">';i+="                       <\/div>";i+='                       <div class="col-md-12 col-xs-10">';i+='                           <button onclick="draw();" class="btn btn-default" data-toggle="tooltip" title="Nhấp để xem cách viết (Ctrl-D)">Cách viết<\/button>';var f=r.DisplayType=="1"?"checked = 'checked'":"",e=r.DisplayType=="2"?"checked = 'checked'":"",o=r.DisplayType=="3"?"checked = 'checked'":"";i+='                           <label class="radio-inline"><input type="radio" name="rdoDraw" id="rdoHiragana" '+f+'">Hiragana<\/label>';i+='                           <label class="radio-inline"><input type="radio" name="rdoDraw" id="rdoKatakana" '+e+'">Katakana<\/label>';i+='                           <label class="radio-inline"><input type="radio" name="rdoDraw" id="rdoKanji" "'+o+'">Kanji<\/label>';i+="                       <\/div>";i+="                   <\/div>";i+='                   <div class="row">';i+='                       <div class="col-md-12" id="draw"><\/div>';i+="                   <\/div>";i+="               <\/div>";i+="           <\/div>"}i+="       <\/div>";i+='       <a id="flashPre" class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">';i+='           <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"><\/span>';i+='           <span class="sr-only">Previous<\/span>';i+="       <\/a>";i+='       <a id="flashNext" class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">';i+='           <span class="glyphicon glyphicon-chevron-right" aria-hidden="true">';i+='           <\/span><span class="sr-only">Next<\/span>';i+="       <\/a>";i+="   <\/div>";i+="<\/div>";$("#flashCard").html(i);clearInterval(timer);t&&speak(r.UrlAudio);$(".carousel").carousel({interval:0});u='<div class="progress-bar" role="progressbar" aria-valuenow="'+(n+1)+'" aria-valuemin="0" " aria-valuemax="'+vocas.length+'" style="width: '+(n+1)/vocas.length*100+'%; min-width: 2em;">'+(n+1)+"/"+vocas.length+"<\/div>";$("#progress").html(u)}}function searchVoca(n){for(var t=0;t<vocas.length;t++)if(t==n)return vocas[t]}function drawKanji(n,t){n.preventDefault();$("#txtKanji").val($(t).text());dr($(t).text());$("#drawingModal").modal()}var totalVoca=0,numOfHasLearnt=0,defaultVocas=[],vocas=[],selectedArray=[],currentIndex=0,timer;$(document).ready(function(){getVocas();$("#modalDraw").draggable({handle:".modal-header"});$("#btnOkChoosingWordTypeModal").on("click",function(){$("#rdoSelect").is(":checked")?$("#modalChoosingWord").modal():$("#rdoHasLearnt").is(":checked")?getVocas(1):$("#rdoHasNotLearnt").is(":checked")?getVocas(0):$("#rdoWeakVoca").is(":checked")&&getVocas(2);$("#modalChoosingWordType").modal("hide")});$("#modalChoosingWord").on("show.bs.modal",function(){var n=$("#vcd").val();$("#choosingWords").load("/Library/"+$("#gcv").val()+"/"+n)});$("#btnOkChoosingWordModal").on("click",function(){$("#modalChoosingWord").modal("hide");setChosenWordList();currentIndex=0;showFlashCard(currentIndex,!0)});var n=$("#ss").val();n==null||n==""?($("#btnAdd").prop("disabled",!0),$("#btnCheck").addClass("disabled")):($("#btnAdd").prop("disabled",!1),$("#btnCheck").removeClass("disabled"));$("#btnMark").on("click",function(){return updateHasMarked(),!1});$("#btnLast").on("click",function(){currentIndex=vocas.length-1;showFlashCard(currentIndex,!0);$(".navigator").removeClass("btn-primary");$(".navigator").addClass("btn-default");$(this).removeClass("btn-default");$(this).addClass("btn-primary")});$("#btnNext").on("click",function(){currentIndex<vocas.length-1&&(currentIndex++,showFlashCard(currentIndex,!0),$(".navigator").removeClass("btn-primary"),$(".navigator").addClass("btn-default"),$(this).removeClass("btn-default"),$(this).addClass("btn-primary"))});$("#btnFirst").on("click",function(){currentIndex=0;showFlashCard(currentIndex,!0);$(".navigator").removeClass("btn-primary");$(".navigator").addClass("btn-default");$(this).removeClass("btn-default");$(this).addClass("btn-primary")});$("#btnPrevious").on("click",function(){currentIndex>0&&(currentIndex--,showFlashCard(currentIndex,!0),$(".navigator").removeClass("btn-primary"),$(".navigator").addClass("btn-default"),$(this).removeClass("btn-default"),$(this).addClass("btn-primary"))});$(document).keydown(function(n){var t=n.keyCode?n.keyCode:n.which;if(n.ctrlKey){if(t==39)return $("#btnNext").trigger("click"),!1;if(t==37)return $("#btnPrevious").trigger("click"),!1;if(t==68)return draw(),!1}else{if(t==32)return speak(vocas[currentIndex].UrlAudio),!1;if(t==13)return $("#btnNext").trigger("click"),!1;if(t==39)return $("#flashNext").trigger("click"),!1;if(t==37)return $("#flashPre").trigger("click"),!1}})});
/*
//# sourceMappingURL=le.min.js.map
*/